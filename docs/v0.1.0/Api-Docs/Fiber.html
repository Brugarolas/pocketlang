<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/svg" href="../../../static/img/favicon.svg">
  <script src="../../../static/highlight.js/highlight.min.js"></script>
  <link rel="stylesheet" href="../../../static/highlight.js/theme_docs.css">
  <link rel="stylesheet" href="../../../static/rage_font/style.css">
  <link rel="stylesheet" href="../../../static/css/style.css">
  <link rel="stylesheet" href="../../../static/css/docs.css">
  <title>Docs - pocketlang</title>
</head>

<body>

  <!-- Navigation bar at the side of the page. -->
  <div id="navigation" class="collapsed">
    <!-- This tag will become top navbar for smaller screen (otherwise navigation top). -->
    <div id="navtop">
      <div class="flex flac flsb">
        <a href="../../../index.html">
          <div class="flex flac">
            <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   width="60mm"
   height="85mm"
   viewBox="0 0 60 85"
   version="1.1"
   id="pocket-logo"
   inkscape:version="1.1.2 (b8e25be833, 2022-02-05)"
   sodipodi:docname="pocketlang.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview7"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:document-units="mm"
     showgrid="false"
     inkscape:zoom="2"
     inkscape:cx="187.75"
     inkscape:cy="137.75"
     inkscape:window-width="1920"
     inkscape:window-height="1001"
     inkscape:window-x="-9"
     inkscape:window-y="-9"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer6"
     inkscape:snap-text-baseline="true"
     width="199mm" />
  <defs
     id="defs2" />
  <g
     inkscape:groupmode="layer"
     id="layer1"
     inkscape:label="gear"
     style="display:inline">
    <path
       id="path7786"
       style="fill:#433242;fill-opacity:1;stroke:#020000;stroke-width:0.115739;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0"
       inkscape:transform-center-y="-1.9949254e-06"
       d="m 34.643917,1.118321 a 8.9533033,8.9533033 0 0 0 -2.69906,1.0376614 l 0.02687,1.3332539 A 7.7433246,7.7433246 0 0 0 30.298448,5.0255765 L 29.02204,4.9186054 a 8.9533033,8.9533033 0 0 0 -1.188559,2.6308473 l 0.882634,0.8728154 a 7.7433246,7.7433246 0 0 0 -0.147796,1.4789789 7.7433246,7.7433246 0 0 0 0.07131,1.022678 l -0.922422,0.807701 a 8.9533033,8.9533033 0 0 0 1.052647,2.705262 l 1.25212,-0.02687 a 7.7433246,7.7433246 0 0 0 1.5813,1.633493 l -0.101287,1.278475 a 8.9533033,8.9533033 0 0 0 2.679424,1.205092 l 0.912607,-0.980818 a 7.7433246,7.7433246 0 0 0 1.217496,0.09819 7.7433246,7.7433246 0 0 0 0.801499,-0.04651 l 0.901756,1.094505 a 8.9533033,8.9533033 0 0 0 2.708878,-0.941544 l -0.02946,-1.467093 a 7.7433246,7.7433246 0 0 0 1.617988,-1.492417 l 1.557528,0.130741 a 8.9533033,8.9533033 0 0 0 1.16944,-2.446877 L 43.910528,11.359044 A 7.7433246,7.7433246 0 0 0 44.054705,9.901251 7.7433246,7.7433246 0 0 0 43.993215,8.927666 L 45.197278,7.8734641 A 8.9533033,8.9533033 0 0 0 44.211292,5.3774934 l -1.591117,0.034105 A 7.7433246,7.7433246 0 0 0 41.063163,3.788443 L 41.18357,2.2655384 A 8.9533033,8.9533033 0 0 0 38.591997,1.1803314 L 37.584305,2.2639879 A 7.7433246,7.7433246 0 0 0 36.311517,2.1580514 7.7433246,7.7433246 0 0 0 35.53637,2.2019754 Z m 1.798857,4.5098017 a 4.2080248,4.2080248 0 0 1 4.208012,4.2080123 4.2080248,4.2080248 0 0 1 -4.208012,4.20801 4.2080248,4.2080248 0 0 1 -4.208013,-4.20801 4.2080248,4.2080248 0 0 1 4.208013,-4.2080123 z" />
    <path
       id="path25778"
       style="fill:#433242;fill-opacity:1;stroke:#020000;stroke-width:0.115739;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0"
       inkscape:transform-center-y="-1.9949254e-06"
       d="m 47.399493,19.594186 a 8.9533033,8.9533033 0 0 0 -2.69906,1.03766 l 0.02687,1.33325 a 7.7433246,7.7433246 0 0 0 -1.67328,1.53634 l -1.276409,-0.10697 a 8.9533033,8.9533033 0 0 0 -1.188558,2.63085 l 0.882634,0.87281 a 7.7433246,7.7433246 0 0 0 -0.147796,1.47898 7.7433246,7.7433246 0 0 0 0.07131,1.02268 l -0.922422,0.8077 a 8.9533033,8.9533033 0 0 0 1.052647,2.70526 l 1.25212,-0.0269 a 7.7433246,7.7433246 0 0 0 1.5813,1.63349 l -0.101287,1.27848 a 8.9533033,8.9533033 0 0 0 2.679424,1.20509 l 0.912607,-0.98082 a 7.7433246,7.7433246 0 0 0 1.217496,0.0982 7.7433246,7.7433246 0 0 0 0.801499,-0.0465 l 0.901756,1.09451 a 8.9533033,8.9533033 0 0 0 2.708878,-0.94155 l -0.02946,-1.46709 a 7.7433246,7.7433246 0 0 0 1.617988,-1.49242 l 1.557528,0.13074 a 8.9533033,8.9533033 0 0 0 1.16944,-2.44687 l -1.128615,-1.11622 a 7.7433246,7.7433246 0 0 0 0.144177,-1.45779 7.7433246,7.7433246 0 0 0 -0.0615,-0.97358 l 1.204061,-1.0542 a 8.9533033,8.9533033 0 0 0 -0.985986,-2.49597 l -1.591117,0.0341 a 7.7433246,7.7433246 0 0 0 -1.556999,-1.62314 l 0.120407,-1.52291 a 8.9533033,8.9533033 0 0 0 -2.591573,-1.0852 l -1.007692,1.08365 a 7.7433246,7.7433246 0 0 0 -1.272788,-0.10593 7.7433246,7.7433246 0 0 0 -0.775148,0.0439 z m 1.798857,4.5098 a 4.2080248,4.2080248 0 0 1 4.208012,4.20801 4.2080248,4.2080248 0 0 1 -4.208012,4.20801 4.2080248,4.2080248 0 0 1 -4.208013,-4.20801 4.2080248,4.2080248 0 0 1 4.208013,-4.20801 z" />
    <path
       id="path25860"
       style="fill:#423242;fill-opacity:1;stroke:#020000;stroke-width:0.233957;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0"
       inkscape:transform-center-y="2.7909511e-05"
       d="m 16.864499,16.897796 a 18.098269,18.098269 0 0 0 -5.455899,2.09753 l 0.05432,2.69504 a 15.65241,15.65241 0 0 0 -3.3823803,3.10558 l -2.5801414,-0.21624 a 18.098269,18.098269 0 0 0 -2.4025611,5.31802 l 1.7841639,1.76431 a 15.65241,15.65241 0 0 0 -0.2987575,2.98962 15.65241,15.65241 0 0 0 0.1441486,2.06725 l -1.8645916,1.6327 a 18.098269,18.098269 0 0 0 2.1278282,5.46842 l 2.5310449,-0.0544 a 15.65241,15.65241 0 0 0 3.1964503,3.30195 l -0.204743,2.58433 a 18.098269,18.098269 0 0 0 5.416207,2.43598 l 1.84475,-1.98264 a 15.65241,15.65241 0 0 0 2.461055,0.1985 15.65241,15.65241 0 0 0 1.620156,-0.0939 l 1.822815,2.21245 a 18.098269,18.098269 0 0 0 5.475745,-1.90327 l -0.05955,-2.96557 a 15.65241,15.65241 0 0 0 3.270613,-3.01679 l 3.148397,0.26426 a 18.098269,18.098269 0 0 0 2.363915,-4.94612 l -2.281391,-2.25632 a 15.65241,15.65241 0 0 0 0.29144,-2.94678 15.65241,15.65241 0 0 0 -0.124316,-1.968 l 2.433898,-2.13099 a 18.098269,18.098269 0 0 0 -1.993081,-5.04535 l -3.216293,0.0689 a 15.65241,15.65241 0 0 0 -3.147329,-3.28104 l 0.243391,-3.07841 a 18.098269,18.098269 0 0 0 -5.238623,-2.19363 l -2.036956,2.1905 a 15.65241,15.65241 0 0 0 -2.572822,-0.21413 15.65241,15.65241 0 0 0 -1.566889,0.0888 z m 3.636222,9.11615 a 8.5061304,8.5061304 0 0 1 8.506105,8.50609 8.5061304,8.5061304 0 0 1 -8.506105,8.50611 8.5061304,8.5061304 0 0 1 -8.506106,-8.50611 8.5061304,8.5061304 0 0 1 8.506106,-8.50609 z"
       inkscape:transform-center-x="-4.7871538e-06" />
  </g>
  <g
     inkscape:groupmode="layer"
     id="layer2"
     inkscape:label="pocket"
     style="display:inline">
    <path
       style="display:inline;fill:#02509b;fill-opacity:1;stroke:#02509b;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 2.1788564,32.895766 58.000619,32.958436 54.078933,68.971646 30.334364,83.826456 5.8464835,68.252946 Z"
       id="path888"
       sodipodi:nodetypes="cccccc" />
  </g>
  <g
     inkscape:groupmode="layer"
     id="layer3"
     inkscape:label="thread">
    <path
       style="fill:#ffffff;fill-opacity:0;stroke:#ffffff;stroke-width:0.499999;stroke-miterlimit:4;stroke-dasharray:1.5, 0.499999;stroke-dashoffset:0;stroke-opacity:1"
       d="M 5.0192948,35.429917 55.252601,35.59362 52.212412,67.188217 30.276266,81.523887 8.0828715,67.305149 Z"
       id="path2442" />
    <path
       style="fill:#ffffff;fill-opacity:0;stroke:#ffffff;stroke-width:0.499999;stroke-miterlimit:4;stroke-dasharray:1.5, 0.499999;stroke-dashoffset:0;stroke-opacity:1"
       d="M 6.9837256,55.471789 C 11.754487,55.05084 23.962023,56.9685 27.703797,59.120018 c 3.250097,1.868804 9.775382,8.138358 8.980257,11.41241 -0.977976,4.026972 -3.414369,5.706203 -6.594878,5.799749 -3.180507,0.09354 -6.361015,-2.666014 -6.127154,-6.969054 0.233861,-4.303041 6.828738,-10.196331 12.020448,-11.739813 5.191709,-1.543481 16.884751,-1.870887 16.884751,-1.870887"
       id="path2840"
       sodipodi:nodetypes="csssssc" />
  </g>
</svg>

            <h1 id="nav-title">Pocketlang Docs</h1>
          </div>
        </a>
        <!-- Toggle menu icon. -->
        <svg xmlns="http://www.w3.org/2000/svg" id="toggle-menu" viewBox="0 0 20 20" width="30" height="30">
          <path d="M0 0h24v24H0z" fill="none"></path>
          <path fill="currentColor" d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path>
        </svg>
      </div>
    </div>
    <!-- Generated navigation tree. -->
    <div id="navtree" class="space-bottom">
      <ul>
                <li>
          <div class="nav-section">
            <p> Reference </p>
            <svg class="collapse-arrow" role="img" class="opacity-60" viewBox="0 0 16 16" width="16" height="16" fill="currentColor"><path fill-rule="evenodd" d="M12.78 6.22a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06 0L3.22 7.28a.75.75 0 011.06-1.06L8 9.94l3.72-3.72a.75.75 0 011.06 0z"></path></svg>
          </div>
          <ul class="nav-topics">
            <li><a href="../Reference/Getting-Started.html"> Getting Started </a></li>
            <li><a href="../Reference/Cheat-Sheet.html"> Cheat Sheet </a></li>
            <li><a href="../Reference/Build-From-Source.html"> Build From Source </a></li>
            <li><a href="../Reference/Installation.html"> Installation </a></li>
          </ul>
        </li>
        <li>
          <div class="nav-section">
            <p> Api Docs </p>
            <svg class="collapse-arrow" role="img" class="opacity-60" viewBox="0 0 16 16" width="16" height="16" fill="currentColor"><path fill-rule="evenodd" d="M12.78 6.22a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06 0L3.22 7.28a.75.75 0 011.06-1.06L8 9.94l3.72-3.72a.75.75 0 011.06 0z"></path></svg>
          </div>
          <ul class="nav-topics">
            <li><a href="../Api-Docs/Fiber.html"> Fiber </a></li>
            <li><a href="../Api-Docs/Module.html"> Module </a></li>
          </ul>
        </li>

      </ul>
    </div>
  </div>

  <!-- Main content of the page. Divided into the doc content and the table of content. -->
  <div id="main">

    <!-- Documentation body -->
    <div id="content-body">
      <h1>Fiber <a href="#Fiber" id="Fiber" class="anchor">#</a></h2> </h1>
      <!-- Generated page content. -->
      <p>Pocketlang support coroutines via <a href="https://en.wikipedia.org/wiki/Fiber_(computer_science)">fibers</a>
(light weight threads with cooperative multitask). A fiber object is a wrapper
around a function, contains the execution state (simply the stack and the
instruction pointer) for that function, which can be run and once yielded
resumed.</p>
<pre><code class="highlight ruby">
import Fiber

def fn(h, w)
  print(h, w)
end

fb = Fiber.new(fn)              # Create a fiber.
Fiber.run(fb, &#x27;hello&#x27;, &#x27;world&#x27;) # Run the fiber.
</code></pre>

<h2 class="topic-title">Yielding <a href="#Yielding" id="Yielding" class="anchor">#</a></h2>

<p>When a function is yielded, it's state will be stored in the fiber it's
belongs to and will return from the function, to parent fiber it's running
from (not the caller of the function). And you can pass values between
fibers when they yield.</p>
<pre><code class="highlight ruby">
import Fiber

def fn()
  print(&#x27;running&#x27;)
  yield()
  print(&#x27;resumed&#x27;)
end

fb = Fiber.new(fn)
Fiber.run(fb)    # Prints &#x27;running&#x27;.
print(&#x27;before resumed&#x27;)
Fiber.resume(fb) # Prints &#x27;resumed&#x27;.
</code></pre>

<p>Yield from the fiber with a value.</p>
<pre><code class="highlight ruby">
import Fiber

def fn()
  print(&#x27;running&#x27;)
  yield(42) # Return 42.
  print(&#x27;resumed&#x27;)
end

fb = Fiber.new(fn)
val = Fiber.run(fb) # Prints &#x27;running&#x27;.
print(val)          # Prints 42.
Fiber.resume(fb)    # Prints &#x27;resumed&#x27;.
</code></pre>

<p>Resume the fiber with a value.</p>
<pre><code class="highlight ruby">
import Fiber

def fn()
  print(&#x27;running&#x27;)
  val = yield() # Resumed value.
  print(val)    # Prints 42.
  print(&#x27;resumed&#x27;)
end

fb = Fiber.new(fn)
val = Fiber.run(fb)  # Prints &#x27;running&#x27;.
Fiber.resume(fb, 42) # Resume with 42, Prints &#x27;resumed&#x27;.
</code></pre>

<p>Once a fiber is done execution, trying to resume it will cause a runtime
error. To check if the fiber is finished check its attribute
<code>is_done</code> and use the attribute <code>function</code> to get it's function,
which could be used to create a new fiber to "re-start" the fiber.</p>
<pre><code class="highlight ruby">
import Fiber

Fiber.run(fb = Fiber.new(
func()
  for i in 0..5 do
    yield(i)
  end
end))

while not fb.is_done
  Fiber.resume(fb)
end

# Get the function from the fiber.
fn = Fiber.get_func(fb)
</code></pre>
      <!-- Footer. -->
      <div id="content-footer">
        <p>Made by <a href="https://www.github.com/ThakeeNathees">ThakeeNathees</a>
          and contributers on <a href="https://www.github.com/">github</a>.</p>
      </div>
    </div>

    <!-- Table of content. -->
    <div id="table-of-content">
      <h3>In this page</h3>
      <ul>
        <li><a class="link" href="#Yielding">Yielding</a></li>

      </ul>
    </div>

  </div>

  <script src="../../../static/js/main.js"></script>
  <script src="../../../static/js/docs.js"></script>
  
</body>
</html>
